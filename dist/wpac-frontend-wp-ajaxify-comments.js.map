{"version":3,"file":"wpac-frontend-wp-ajaxify-comments.js","mappings":";;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACuD;AACF;;AAErD;AACA;AACA;AACA;AACA;AACA,WAAW,sBAAsB;AACjC,WAAW,sBAAsB;AACjC,WAAW,sBAAsB;AACjC,WAAW,sBAAsB;AACjC;;AAEA;AACA;AACA;AACA,WAAW,sBAAsB;AACjC,WAAW,sBAAsB;AACjC;AACA,YAAY,SAAS;AACrB;AACA;AACA;AACA;AACA,SAAS,gEAAgB;AACzB;AACA;AACA,SAAS,iEAAiB;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,QAAQ;AACzB;AACA,gCAAgC,OAAO;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,aAAa,EAAC;AAC7B;;;;;;;;;;;;;;AC5FA;AACA;AACA;AACA;AACA;AACA,WAAW,sBAAsB;AACjC,WAAW,sBAAsB;AACjC;AACA,YAAY,qBAAqB;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,iBAAiB,EAAC;AACjC;;;;;;;;;;;;;;;AClBA;AACA;AACA;AACqD;;AAErD;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,YAAY,oBAAoB;AAChC;;AAEA;AACA;AACA;AACA;AACA,WAAW,sBAAsB;AACjC,WAAW,sBAAsB;AACjC;AACA,YAAY,SAAS;AACrB;AACA;AACA;AACA;AACA,SAAS,gEAAgB;AACzB;AACA;AACA;AACA;AACA;AACA,iEAAe,aAAa,EAAC;AAC7B;;;;;;;;;;;;;;AClCA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA,YAAY,SAAS;AACrB;;AAEA;AACA;AACA;AACA;AACA,WAAW,sBAAsB;AACjC,WAAW,sBAAsB;AACjC;AACA,YAAY,WAAW;AACvB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iEAAe,eAAe,EAAC;AAC/B;;;;;;;;;;;;;;AClCA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA;AACA,YAAY,SAAS;AACrB;AACA;AACA;AACA;AACA;AACA,WAAW,sBAAsB;AACjC,WAAW,sBAAsB;AACjC;AACA,YAAY,SAAS;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,aAAa,EAAC;AAC7B;;;;;;;;;;;;;;;;;;;;;;ACjCA;AACA;AACA;AAC4C;AACM;AACN;AACA;AACQ;AACJ;AACJ;;AAE5C;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA,eAAe,mBAAmB;AAClC;AACA;;AAEA,eAAe,mBAAmB;AAClC;AACA;AACA,qBAAqB,0DAAa;AAClC,qBAAqB,0DAAa;AAClC,wBAAwB,6DAAgB;AACxC,wBAAwB,6DAAgB;AACxC,qBAAqB,0DAAa;AAClC,qBAAqB,0DAAa;AAClC,4BAA4B,6DAAgB;AAC5C,4BAA4B,6DAAgB;AAC5C,oBAAoB,0DAAa;AACjC,wBAAwB,0DAAa;AACrC,yBAAyB,8DAAiB;AAC1C,yBAAyB,8DAAiB;AAC1C,uBAAuB,4DAAe;AACtC,uBAAuB,4DAAe;AACtC,qBAAqB,0DAAa;AAClC,qBAAqB,0DAAa;AAClC;AACA;;AAEA,cAAc,QAAQ;;AAEtB;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA,iEAAe,WAAW,EAAC;AAC3B;;;;;;;;;;;;;;;;ACzDA;AACA;AACA;AACuD;AACF;;AAErD;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA;AACA,YAAY,oBAAoB;AAChC;;AAEA;AACA;AACA;AACA;AACA,WAAW,sBAAsB;AACjC,WAAW,sBAAsB;AACjC,WAAW,sBAAsB;AACjC;AACA;AACA;AACA,YAAY,YAAY;AACxB;AACA;AACA;AACA;AACA,SAAS,gEAAgB;AACzB;AACA;AACA,uBAAuB,iEAAiB;AACxC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,wCAAwC,QAAQ;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,gBAAgB,EAAC;AAChC;;;;;;;;;;;;;;AC9EA;AACA;AACA;AACA;AACA;AACA,WAAW,sBAAsB;AACjC,WAAW,sBAAsB;AACjC,WAAW,sBAAsB;AACjC;AACA;AACA,YAAY,4DAA4D;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,QAAQ,IAAqC;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,aAAa,EAAC;AAC7B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvDA;AACA;AACA;AACwC;;AAExC,cAAc,uBAAuB;;AAErC;AACA;AACA,cAAc,UAAU;AACxB,cAAc,UAAU;AACxB,cAAc,UAAU;AACxB;;AAEA;AACA;AACA,cAAc,WAAW;AACzB,cAAc,WAAW;AACzB;;AAEA;AACA;AACA,cAAc,QAAQ;AACtB,cAAc,QAAQ;AACtB;;AAEA;AACA,aAAa,wBAAwB,uBAAuB;AAC5D;;AAEA;AACA,aAAa,uBAAuB;AACpC;;AAEA;AACA,aAAa,+BAA+B;AAC5C;;AAEO,qBAAqB,wDAAW;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACyP;AAC3P;;;;;;;;;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","sources":["webpack://wp-ajaxify-comments/./node_modules/@wordpress/hooks/build-module/createAddHook.js","webpack://wp-ajaxify-comments/./node_modules/@wordpress/hooks/build-module/createCurrentHook.js","webpack://wp-ajaxify-comments/./node_modules/@wordpress/hooks/build-module/createDidHook.js","webpack://wp-ajaxify-comments/./node_modules/@wordpress/hooks/build-module/createDoingHook.js","webpack://wp-ajaxify-comments/./node_modules/@wordpress/hooks/build-module/createHasHook.js","webpack://wp-ajaxify-comments/./node_modules/@wordpress/hooks/build-module/createHooks.js","webpack://wp-ajaxify-comments/./node_modules/@wordpress/hooks/build-module/createRemoveHook.js","webpack://wp-ajaxify-comments/./node_modules/@wordpress/hooks/build-module/createRunHook.js","webpack://wp-ajaxify-comments/./node_modules/@wordpress/hooks/build-module/index.js","webpack://wp-ajaxify-comments/./node_modules/@wordpress/hooks/build-module/validateHookName.js","webpack://wp-ajaxify-comments/./node_modules/@wordpress/hooks/build-module/validateNamespace.js","webpack://wp-ajaxify-comments/webpack/bootstrap","webpack://wp-ajaxify-comments/webpack/runtime/define property getters","webpack://wp-ajaxify-comments/webpack/runtime/hasOwnProperty shorthand","webpack://wp-ajaxify-comments/webpack/runtime/make namespace object","webpack://wp-ajaxify-comments/./src/js/frontend/wp-ajaxify-comments.js"],"sourcesContent":["/**\n * Internal dependencies\n */\nimport validateNamespace from './validateNamespace.js';\nimport validateHookName from './validateHookName.js';\n\n/**\n * @callback AddHook\n *\n * Adds the hook to the appropriate hooks container.\n *\n * @param {string}               hookName      Name of hook to add\n * @param {string}               namespace     The unique namespace identifying the callback in the form `vendor/plugin/function`.\n * @param {import('.').Callback} callback      Function to call when the hook is run\n * @param {number}               [priority=10] Priority of this hook\n */\n\n/**\n * Returns a function which, when invoked, will add a hook.\n *\n * @param {import('.').Hooks}    hooks    Hooks instance.\n * @param {import('.').StoreKey} storeKey\n *\n * @return {AddHook} Function that adds a new hook.\n */\nfunction createAddHook(hooks, storeKey) {\n  return function addHook(hookName, namespace, callback, priority = 10) {\n    const hooksStore = hooks[storeKey];\n    if (!validateHookName(hookName)) {\n      return;\n    }\n    if (!validateNamespace(namespace)) {\n      return;\n    }\n    if ('function' !== typeof callback) {\n      // eslint-disable-next-line no-console\n      console.error('The hook callback must be a function.');\n      return;\n    }\n\n    // Validate numeric priority\n    if ('number' !== typeof priority) {\n      // eslint-disable-next-line no-console\n      console.error('If specified, the hook priority must be a number.');\n      return;\n    }\n    const handler = {\n      callback,\n      priority,\n      namespace\n    };\n    if (hooksStore[hookName]) {\n      // Find the correct insert index of the new hook.\n      const handlers = hooksStore[hookName].handlers;\n\n      /** @type {number} */\n      let i;\n      for (i = handlers.length; i > 0; i--) {\n        if (priority >= handlers[i - 1].priority) {\n          break;\n        }\n      }\n      if (i === handlers.length) {\n        // If append, operate via direct assignment.\n        handlers[i] = handler;\n      } else {\n        // Otherwise, insert before index via splice.\n        handlers.splice(i, 0, handler);\n      }\n\n      // We may also be currently executing this hook.  If the callback\n      // we're adding would come after the current callback, there's no\n      // problem; otherwise we need to increase the execution index of\n      // any other runs by 1 to account for the added element.\n      hooksStore.__current.forEach(hookInfo => {\n        if (hookInfo.name === hookName && hookInfo.currentIndex >= i) {\n          hookInfo.currentIndex++;\n        }\n      });\n    } else {\n      // This is the first hook of its type.\n      hooksStore[hookName] = {\n        handlers: [handler],\n        runs: 0\n      };\n    }\n    if (hookName !== 'hookAdded') {\n      hooks.doAction('hookAdded', hookName, namespace, callback, priority);\n    }\n  };\n}\nexport default createAddHook;\n//# sourceMappingURL=createAddHook.js.map","/**\n * Returns a function which, when invoked, will return the name of the\n * currently running hook, or `null` if no hook of the given type is currently\n * running.\n *\n * @param {import('.').Hooks}    hooks    Hooks instance.\n * @param {import('.').StoreKey} storeKey\n *\n * @return {() => string | null} Function that returns the current hook name or null.\n */\nfunction createCurrentHook(hooks, storeKey) {\n  return function currentHook() {\n    var _hooksStore$__current;\n    const hooksStore = hooks[storeKey];\n    return (_hooksStore$__current = hooksStore.__current[hooksStore.__current.length - 1]?.name) !== null && _hooksStore$__current !== void 0 ? _hooksStore$__current : null;\n  };\n}\nexport default createCurrentHook;\n//# sourceMappingURL=createCurrentHook.js.map","/**\n * Internal dependencies\n */\nimport validateHookName from './validateHookName.js';\n\n/**\n * @callback DidHook\n *\n * Returns the number of times an action has been fired.\n *\n * @param {string} hookName The hook name to check.\n *\n * @return {number | undefined} The number of times the hook has run.\n */\n\n/**\n * Returns a function which, when invoked, will return the number of times a\n * hook has been called.\n *\n * @param {import('.').Hooks}    hooks    Hooks instance.\n * @param {import('.').StoreKey} storeKey\n *\n * @return {DidHook} Function that returns a hook's call count.\n */\nfunction createDidHook(hooks, storeKey) {\n  return function didHook(hookName) {\n    const hooksStore = hooks[storeKey];\n    if (!validateHookName(hookName)) {\n      return;\n    }\n    return hooksStore[hookName] && hooksStore[hookName].runs ? hooksStore[hookName].runs : 0;\n  };\n}\nexport default createDidHook;\n//# sourceMappingURL=createDidHook.js.map","/**\n * @callback DoingHook\n * Returns whether a hook is currently being executed.\n *\n * @param {string} [hookName] The name of the hook to check for.  If\n *                            omitted, will check for any hook being executed.\n *\n * @return {boolean} Whether the hook is being executed.\n */\n\n/**\n * Returns a function which, when invoked, will return whether a hook is\n * currently being executed.\n *\n * @param {import('.').Hooks}    hooks    Hooks instance.\n * @param {import('.').StoreKey} storeKey\n *\n * @return {DoingHook} Function that returns whether a hook is currently\n *                     being executed.\n */\nfunction createDoingHook(hooks, storeKey) {\n  return function doingHook(hookName) {\n    const hooksStore = hooks[storeKey];\n\n    // If the hookName was not passed, check for any current hook.\n    if ('undefined' === typeof hookName) {\n      return 'undefined' !== typeof hooksStore.__current[0];\n    }\n\n    // Return the __current hook.\n    return hooksStore.__current[0] ? hookName === hooksStore.__current[0].name : false;\n  };\n}\nexport default createDoingHook;\n//# sourceMappingURL=createDoingHook.js.map","/**\n * @callback HasHook\n *\n * Returns whether any handlers are attached for the given hookName and optional namespace.\n *\n * @param {string} hookName    The name of the hook to check for.\n * @param {string} [namespace] Optional. The unique namespace identifying the callback\n *                             in the form `vendor/plugin/function`.\n *\n * @return {boolean} Whether there are handlers that are attached to the given hook.\n */\n/**\n * Returns a function which, when invoked, will return whether any handlers are\n * attached to a particular hook.\n *\n * @param {import('.').Hooks}    hooks    Hooks instance.\n * @param {import('.').StoreKey} storeKey\n *\n * @return {HasHook} Function that returns whether any handlers are\n *                   attached to a particular hook and optional namespace.\n */\nfunction createHasHook(hooks, storeKey) {\n  return function hasHook(hookName, namespace) {\n    const hooksStore = hooks[storeKey];\n\n    // Use the namespace if provided.\n    if ('undefined' !== typeof namespace) {\n      return hookName in hooksStore && hooksStore[hookName].handlers.some(hook => hook.namespace === namespace);\n    }\n    return hookName in hooksStore;\n  };\n}\nexport default createHasHook;\n//# sourceMappingURL=createHasHook.js.map","/**\n * Internal dependencies\n */\nimport createAddHook from './createAddHook';\nimport createRemoveHook from './createRemoveHook';\nimport createHasHook from './createHasHook';\nimport createRunHook from './createRunHook';\nimport createCurrentHook from './createCurrentHook';\nimport createDoingHook from './createDoingHook';\nimport createDidHook from './createDidHook';\n\n/**\n * Internal class for constructing hooks. Use `createHooks()` function\n *\n * Note, it is necessary to expose this class to make its type public.\n *\n * @private\n */\nexport class _Hooks {\n  constructor() {\n    /** @type {import('.').Store} actions */\n    this.actions = Object.create(null);\n    this.actions.__current = [];\n\n    /** @type {import('.').Store} filters */\n    this.filters = Object.create(null);\n    this.filters.__current = [];\n    this.addAction = createAddHook(this, 'actions');\n    this.addFilter = createAddHook(this, 'filters');\n    this.removeAction = createRemoveHook(this, 'actions');\n    this.removeFilter = createRemoveHook(this, 'filters');\n    this.hasAction = createHasHook(this, 'actions');\n    this.hasFilter = createHasHook(this, 'filters');\n    this.removeAllActions = createRemoveHook(this, 'actions', true);\n    this.removeAllFilters = createRemoveHook(this, 'filters', true);\n    this.doAction = createRunHook(this, 'actions');\n    this.applyFilters = createRunHook(this, 'filters', true);\n    this.currentAction = createCurrentHook(this, 'actions');\n    this.currentFilter = createCurrentHook(this, 'filters');\n    this.doingAction = createDoingHook(this, 'actions');\n    this.doingFilter = createDoingHook(this, 'filters');\n    this.didAction = createDidHook(this, 'actions');\n    this.didFilter = createDidHook(this, 'filters');\n  }\n}\n\n/** @typedef {_Hooks} Hooks */\n\n/**\n * Returns an instance of the hooks object.\n *\n * @return {Hooks} A Hooks instance.\n */\nfunction createHooks() {\n  return new _Hooks();\n}\nexport default createHooks;\n//# sourceMappingURL=createHooks.js.map","/**\n * Internal dependencies\n */\nimport validateNamespace from './validateNamespace.js';\nimport validateHookName from './validateHookName.js';\n\n/**\n * @callback RemoveHook\n * Removes the specified callback (or all callbacks) from the hook with a given hookName\n * and namespace.\n *\n * @param {string} hookName  The name of the hook to modify.\n * @param {string} namespace The unique namespace identifying the callback in the\n *                           form `vendor/plugin/function`.\n *\n * @return {number | undefined} The number of callbacks removed.\n */\n\n/**\n * Returns a function which, when invoked, will remove a specified hook or all\n * hooks by the given name.\n *\n * @param {import('.').Hooks}    hooks             Hooks instance.\n * @param {import('.').StoreKey} storeKey\n * @param {boolean}              [removeAll=false] Whether to remove all callbacks for a hookName,\n *                                                 without regard to namespace. Used to create\n *                                                 `removeAll*` functions.\n *\n * @return {RemoveHook} Function that removes hooks.\n */\nfunction createRemoveHook(hooks, storeKey, removeAll = false) {\n  return function removeHook(hookName, namespace) {\n    const hooksStore = hooks[storeKey];\n    if (!validateHookName(hookName)) {\n      return;\n    }\n    if (!removeAll && !validateNamespace(namespace)) {\n      return;\n    }\n\n    // Bail if no hooks exist by this name.\n    if (!hooksStore[hookName]) {\n      return 0;\n    }\n    let handlersRemoved = 0;\n    if (removeAll) {\n      handlersRemoved = hooksStore[hookName].handlers.length;\n      hooksStore[hookName] = {\n        runs: hooksStore[hookName].runs,\n        handlers: []\n      };\n    } else {\n      // Try to find the specified callback to remove.\n      const handlers = hooksStore[hookName].handlers;\n      for (let i = handlers.length - 1; i >= 0; i--) {\n        if (handlers[i].namespace === namespace) {\n          handlers.splice(i, 1);\n          handlersRemoved++;\n          // This callback may also be part of a hook that is\n          // currently executing.  If the callback we're removing\n          // comes after the current callback, there's no problem;\n          // otherwise we need to decrease the execution index of any\n          // other runs by 1 to account for the removed element.\n          hooksStore.__current.forEach(hookInfo => {\n            if (hookInfo.name === hookName && hookInfo.currentIndex >= i) {\n              hookInfo.currentIndex--;\n            }\n          });\n        }\n      }\n    }\n    if (hookName !== 'hookRemoved') {\n      hooks.doAction('hookRemoved', hookName, namespace);\n    }\n    return handlersRemoved;\n  };\n}\nexport default createRemoveHook;\n//# sourceMappingURL=createRemoveHook.js.map","/**\n * Returns a function which, when invoked, will execute all callbacks\n * registered to a hook of the specified type, optionally returning the final\n * value of the call chain.\n *\n * @param {import('.').Hooks}    hooks                  Hooks instance.\n * @param {import('.').StoreKey} storeKey\n * @param {boolean}              [returnFirstArg=false] Whether each hook callback is expected to\n *                                                      return its first argument.\n *\n * @return {(hookName:string, ...args: unknown[]) => undefined|unknown} Function that runs hook callbacks.\n */\nfunction createRunHook(hooks, storeKey, returnFirstArg = false) {\n  return function runHooks(hookName, ...args) {\n    const hooksStore = hooks[storeKey];\n    if (!hooksStore[hookName]) {\n      hooksStore[hookName] = {\n        handlers: [],\n        runs: 0\n      };\n    }\n    hooksStore[hookName].runs++;\n    const handlers = hooksStore[hookName].handlers;\n\n    // The following code is stripped from production builds.\n    if ('production' !== process.env.NODE_ENV) {\n      // Handle any 'all' hooks registered.\n      if ('hookAdded' !== hookName && hooksStore.all) {\n        handlers.push(...hooksStore.all.handlers);\n      }\n    }\n    if (!handlers || !handlers.length) {\n      return returnFirstArg ? args[0] : undefined;\n    }\n    const hookInfo = {\n      name: hookName,\n      currentIndex: 0\n    };\n    hooksStore.__current.push(hookInfo);\n    while (hookInfo.currentIndex < handlers.length) {\n      const handler = handlers[hookInfo.currentIndex];\n      const result = handler.callback.apply(null, args);\n      if (returnFirstArg) {\n        args[0] = result;\n      }\n      hookInfo.currentIndex++;\n    }\n    hooksStore.__current.pop();\n    if (returnFirstArg) {\n      return args[0];\n    }\n    return undefined;\n  };\n}\nexport default createRunHook;\n//# sourceMappingURL=createRunHook.js.map","/**\n * Internal dependencies\n */\nimport createHooks from './createHooks';\n\n/** @typedef {(...args: any[])=>any} Callback */\n\n/**\n * @typedef Handler\n * @property {Callback} callback  The callback\n * @property {string}   namespace The namespace\n * @property {number}   priority  The namespace\n */\n\n/**\n * @typedef Hook\n * @property {Handler[]} handlers Array of handlers\n * @property {number}    runs     Run counter\n */\n\n/**\n * @typedef Current\n * @property {string} name         Hook name\n * @property {number} currentIndex The index\n */\n\n/**\n * @typedef {Record<string, Hook> & {__current: Current[]}} Store\n */\n\n/**\n * @typedef {'actions' | 'filters'} StoreKey\n */\n\n/**\n * @typedef {import('./createHooks').Hooks} Hooks\n */\n\nexport const defaultHooks = createHooks();\nconst {\n  addAction,\n  addFilter,\n  removeAction,\n  removeFilter,\n  hasAction,\n  hasFilter,\n  removeAllActions,\n  removeAllFilters,\n  doAction,\n  applyFilters,\n  currentAction,\n  currentFilter,\n  doingAction,\n  doingFilter,\n  didAction,\n  didFilter,\n  actions,\n  filters\n} = defaultHooks;\nexport { createHooks, addAction, addFilter, removeAction, removeFilter, hasAction, hasFilter, removeAllActions, removeAllFilters, doAction, applyFilters, currentAction, currentFilter, doingAction, doingFilter, didAction, didFilter, actions, filters };\n//# sourceMappingURL=index.js.map","/**\n * Validate a hookName string.\n *\n * @param {string} hookName The hook name to validate. Should be a non empty string containing\n *                          only numbers, letters, dashes, periods and underscores. Also,\n *                          the hook name cannot begin with `__`.\n *\n * @return {boolean} Whether the hook name is valid.\n */\nfunction validateHookName(hookName) {\n  if ('string' !== typeof hookName || '' === hookName) {\n    // eslint-disable-next-line no-console\n    console.error('The hook name must be a non-empty string.');\n    return false;\n  }\n  if (/^__/.test(hookName)) {\n    // eslint-disable-next-line no-console\n    console.error('The hook name cannot begin with `__`.');\n    return false;\n  }\n  if (!/^[a-zA-Z][a-zA-Z0-9_.-]*$/.test(hookName)) {\n    // eslint-disable-next-line no-console\n    console.error('The hook name can only contain numbers, letters, dashes, periods and underscores.');\n    return false;\n  }\n  return true;\n}\nexport default validateHookName;\n//# sourceMappingURL=validateHookName.js.map","/**\n * Validate a namespace string.\n *\n * @param {string} namespace The namespace to validate - should take the form\n *                           `vendor/plugin/function`.\n *\n * @return {boolean} Whether the namespace is valid.\n */\nfunction validateNamespace(namespace) {\n  if ('string' !== typeof namespace || '' === namespace) {\n    // eslint-disable-next-line no-console\n    console.error('The namespace must be a non-empty string.');\n    return false;\n  }\n  if (!/^[a-zA-Z][a-zA-Z0-9_.\\-\\/]*$/.test(namespace)) {\n    // eslint-disable-next-line no-console\n    console.error('The namespace can only contain numbers, letters, dashes, periods, underscores and slashes.');\n    return false;\n  }\n  return true;\n}\nexport default validateNamespace;\n//# sourceMappingURL=validateNamespace.js.map","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { createHooks } from '@wordpress/hooks';\r\n\r\nconst wpacHooks = createHooks();\r\n\r\nWPAC._Options = WPAC._Options || {};\r\n\r\nWPAC._BodyRegex = new RegExp( '<body[^>]*>((.|\\n|\\r)*)</body>', 'i' );\r\nWPAC._ExtractBody = function( html ) {\r\n\ttry {\r\n\t\treturn jQuery( '<div>' + WPAC._BodyRegex.exec( html )[ 1 ] + '</div>' );\r\n\t} catch ( e ) {\r\n\t\treturn false;\r\n\t}\r\n};\r\n\r\nWPAC._TitleRegex = new RegExp( '<title[^>]*>(.*?)<\\\\/title>', 'im' );\r\nWPAC._ExtractTitle = function( html ) {\r\n\ttry {\r\n\t\treturn WPAC._TitleRegex.exec( html )[ 1 ];\r\n\t} catch ( e ) {\r\n\t\treturn false;\r\n\t}\r\n};\r\n\r\nWPAC._ShowMessage = function( message, type ) {\r\n\t// Determine how to display the loading message.\r\n\tconst lazyLoadDisplay = WPAC._Options.lazyLoadDisplay;\r\n\tconst lazyLoadEnabled = WPAC._Options.lazyLoadEnabled;\r\n\r\n\t// Check if lazy load enabled or not.\r\n\tif ( lazyLoadEnabled && 'overlay' !== lazyLoadDisplay ) {\r\n\t\treturn;\r\n\t}\r\n\tconst top =\r\n\t\tWPAC._Options.popupMarginTop + ( jQuery( '#wpadminbar' ).outerHeight() || 0 );\r\n\r\n\tlet backgroundColor = WPAC._Options.popupBackgroundColorLoading;\r\n\tlet textColor = WPAC._Options.popupTextColorLoading;\r\n\tif ( type == 'error' ) {\r\n\t\tbackgroundColor = WPAC._Options.popupBackgroundColorError;\r\n\t\ttextColor = WPAC._Options.popupTextColorError;\r\n\t} else if ( type == 'success' ) {\r\n\t\tbackgroundColor = WPAC._Options.popupBackgroundColorSuccess;\r\n\t\ttextColor = WPAC._Options.popupTextColorSuccess;\r\n\t}\r\n\r\n\tlet topOffset = WPAC._Options.popupVerticalAlign === 'verticalStart' ? top + 'px' : 'unset';\r\n\tif ( WPAC._Options.popupVerticalAlign === 'verticalCenter' ) {\r\n\t\ttopOffset = '45%';\r\n\t}\r\n\t\r\n\tjQuery.blockUI({ \r\n\t\tblockMsgClass: \"wpac-overlay\",\r\n\t\tmessage: message, \r\n\t\tfadeIn: WPAC._Options.popupFadeIn, \r\n\t\tfadeOut: WPAC._Options.popupFadeOut, \r\n\t\ttimeout:(type == \"loading\") ? 0 : WPAC._Options.popupTimeout, \r\n\t\tcenterY: false,\r\n\t\tcenterX: true,\r\n\t\tshowOverlay: true,\r\n\t\tcss: {\r\n\t\t\twidth: 'var(--wpac-popup-width)',\r\n\t\t\tleft: 'calc(50% - var(--wpac-popup-width) / 2)',\r\n\t\t\ttop: topOffset,\r\n\t\t\tbottom: WPAC._Options.popupVerticalAlign === 'verticalEnd' ? top + 'px' : 'unset',\r\n\t\t\tborder: 'none',\r\n\t\t\tpadding: WPAC._Options.popupPadding + 'px',\r\n\t\t\tbackgroundColor,\r\n\t\t\t'-webkit-border-radius': WPAC._Options.popupCornerRadius + 'px',\r\n\t\t\t'-moz-border-radius': WPAC._Options.popupCornerRadius + 'px',\r\n\t\t\t'border-radius': WPAC._Options.popupCornerRadius + 'px',\r\n\t\t\topacity: WPAC._Options.popupOpacity / 100,\r\n\t\t\tcolor: textColor,\r\n\t\t\ttextAlign: WPAC._Options.popupTextAlign,\r\n\t\t\tcursor:\r\n\t\t\t\ttype == 'loading' || type == 'loadingPreview' ? 'wait' : 'default',\r\n\t\t\t'font-size': WPAC._Options.popupTextFontSize,\r\n\t\t},\r\n\t\toverlayCSS: {\r\n\t\t\tbackgroundColor: WPAC._Options.popupOverlayBackgroundColor,\r\n\t\t\topacity: WPAC._Options.popupOverlayBackgroundColorOpacity,\r\n\t\t},\r\n\t\tbaseZ: WPAC._Options.popupZindex,\r\n\t} );\r\n};\r\n\r\nWPAC._DebugErrorShown = false;\r\nWPAC._Debug = function( level, message ) {\r\n\tif ( ! WPAC._Options.debug ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\t// Fix console.log.apply for IE9\r\n\t// see http://stackoverflow.com/a/5539378/516472\r\n\tif (\r\n\t\tFunction.prototype.call &&\r\n\t\tFunction.prototype.call.bind &&\r\n\t\ttypeof window.console !== 'undefined' &&\r\n\t\tconsole &&\r\n\t\ttypeof console.log === 'object' &&\r\n\t\ttypeof window.console[ level ].apply === 'undefined'\r\n\t) {\r\n\t\tconsole[ level ] = Function.prototype.call.bind( console[ level ], console );\r\n\t}\r\n\r\n\tif (\r\n\t\ttypeof window.console === 'undefined' ||\r\n\t\ttypeof window.console[ level ] === 'undefined' ||\r\n\t\ttypeof window.console[ level ].apply === 'undefined'\r\n\t) {\r\n\t\tif ( ! WPAC._DebugErrorShown ) {\r\n\t\t\talert(\r\n\t\t\t\t'Unfortunately the console object is undefined or is not supported in your browser, debugging WP Ajaxify Comments is disabled! Please use Firebug, Google Chrome or Internet Explorer 9 or above with enabled Developer Tools (F12) for debugging WP Ajaxify Comments.',\r\n\t\t\t);\r\n\t\t}\r\n\t\tWPAC._DebugErrorShown = true;\r\n\t\treturn;\r\n\t}\r\n\r\n\tconst args = jQuery.merge(\r\n\t\t[ '[WP Ajaxify Comments] ' + message ],\r\n\t\tjQuery.makeArray( arguments ).slice( 2 ),\r\n\t);\r\n\tconsole[ level ].apply( console, args );\r\n};\r\n\r\nWPAC._DebugSelector = function( elementType, selector, optional ) {\r\n\tif ( ! WPAC._Options.debug ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tconst element = jQuery( selector );\r\n\tif ( ! element.length ) {\r\n\t\tWPAC._Debug(\r\n\t\t\toptional ? 'info' : 'error',\r\n\t\t\t\"Search %s (selector: '%s')... Not found\",\r\n\t\t\telementType,\r\n\t\t\tselector,\r\n\t\t);\r\n\t} else {\r\n\t\tWPAC._Debug(\r\n\t\t\t'info',\r\n\t\t\t\"Search %s (selector: '%s')... Found: %o\",\r\n\t\t\telementType,\r\n\t\t\tselector,\r\n\t\t\telement,\r\n\t\t);\r\n\t}\r\n};\r\n\r\nWPAC._AddQueryParamStringToUrl = function( url, param, value ) {\r\n\tif ( WPAC._Options.disableUrlUpdate ) {\r\n\t\treturn url;\r\n\t}\r\n\t// Get URL object.\r\n\tconst urlObject = new URL( url );\r\n\r\n\t// Get query params.\r\n\tconst queryParams = urlObject.searchParams;\r\n\r\n\t// Set query param.\r\n\tqueryParams.set( param, value );\r\n\r\n\t// Set query params.\r\n\turlObject.search = queryParams.toString();\r\n\r\n\t// Return URL.\r\n\treturn urlObject.toString();\r\n};\r\n\r\nWPAC._LoadFallbackUrl = function( fallbackUrl ) {\r\n\tWPAC._ShowMessage( WPAC._Options.textReloadPage, 'loading' );\r\n\r\n\tconst url = WPAC._AddQueryParamStringToUrl(\r\n\t\tfallbackUrl,\r\n\t\t'WPACRandom',\r\n\t\tnew Date().getTime(),\r\n\t);\r\n\tWPAC._Debug(\r\n\t\t'info',\r\n\t\t\"Something went wrong. Reloading page (URL: '%s')...\",\r\n\t\turl,\r\n\t);\r\n\r\n\tconst reload = function() {\r\n\t\tlocation.href = url;\r\n\t};\r\n\tif ( ! WPAC._Options.debug ) {\r\n\t\treload();\r\n\t} else {\r\n\t\tWPAC._Debug( 'info', 'Sleep for 5s to enable analyzing debug messages...' );\r\n\t\twindow.setTimeout( reload, 5000 );\r\n\t}\r\n};\r\n\r\nWPAC._ScrollToAnchor = function( anchor, updateHash, scrollComplete ) {\r\n\tscrollComplete = scrollComplete || function() { };\r\n\tconst anchorElement = jQuery( anchor );\r\n\tif ( anchorElement.length ) {\r\n\t\tWPAC._Debug(\r\n\t\t\t'info',\r\n\t\t\t'Scroll to anchor element %o (scroll speed: %s ms)...',\r\n\t\t\tanchorElement,\r\n\t\t\tWPAC._Options.scrollSpeed,\r\n\t\t);\r\n\t\tconst animateComplete = function() {\r\n\t\t\tif ( updateHash ) {\r\n\t\t\t\twindow.location.hash = anchor;\r\n\t\t\t}\r\n\t\t\tscrollComplete();\r\n\t\t};\r\n\t\tconst scrollTargetTopOffset = anchorElement.offset().top;\r\n\t\tif ( jQuery( window ).scrollTop() == scrollTargetTopOffset ) {\r\n\t\t\tanimateComplete();\r\n\t\t} else {\r\n\t\t\tjQuery( 'html,body' ).animate(\r\n\t\t\t\t{ scrollTop: scrollTargetTopOffset },\r\n\t\t\t\t{\r\n\t\t\t\t\tduration: WPAC._Options.scrollSpeed,\r\n\t\t\t\t\tcomplete: animateComplete,\r\n\t\t\t\t},\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\tWPAC._Debug( 'error', \"Anchor element not found (selector: '%s')\", anchor );\r\n\treturn false;\r\n};\r\n\r\nWPAC._UpdateUrl = function( url ) {\r\n\tif ( url.split( '#' )[ 0 ] == window.location.href.split( '#' )[ 0 ] ) {\r\n\t\treturn;\r\n\t}\r\n\tif ( window.history.replaceState ) {\r\n\t\twindow.history.replaceState( {}, window.document.title, url );\r\n\t} else {\r\n\t\tWPAC._Debug(\r\n\t\t\t'info',\r\n\t\t\t'Browser does not support window.history.replaceState() to update the URL without reloading the page',\r\n\t\t\tanchor,\r\n\t\t);\r\n\t}\r\n};\r\n\r\nWPAC._ReplaceComments = function(\r\n\tdata,\r\n\tcommentUrl,\r\n\tuseFallbackUrl,\r\n\tformData,\r\n\tformFocus,\r\n\tselectorCommentsContainer,\r\n\tselectorCommentForm,\r\n\tselectorRespondContainer,\r\n\tbeforeSelectElements,\r\n\tbeforeUpdateComments,\r\n\tafterUpdateComments,\r\n) {\r\n\t// Remove any lazy loading messages.\r\n\tjQuery( '#wpac-lazy-load-content-clone' ).remove();\r\n\r\n\tconst fallbackUrl = useFallbackUrl\r\n\t\t? WPAC._AddQueryParamStringToUrl( commentUrl, 'WPACFallback', '1' )\r\n\t\t: commentUrl;\r\n\r\n\tlet oldCommentsContainer = jQuery( selectorCommentsContainer );\r\n\tif ( WPAC._Options.lazyLoadIntoElement && 'comments' !== WPAC._Options.lazyLoadInlineDisplayLocation ) {\r\n\t\toldCommentsContainer = jQuery( WPAC._Options.lazyLoadInlineDisplayElement );\r\n\t}\r\n\tif ( ! oldCommentsContainer.length ) {\r\n\t\tWPAC._Debug(\r\n\t\t\t'error',\r\n\t\t\t\"Comment container on current page not found (selector: '%s')\",\r\n\t\t\tselectorCommentsContainer,\r\n\t\t);\r\n\t\tWPAC._LoadFallbackUrl( fallbackUrl );\r\n\t\treturn false;\r\n\t}\r\n\t// If length is greater than one, there may be greedy selectors.\r\n\tif ( oldCommentsContainer.length > 1 ) {\r\n\t\tWPAC._Debug(\r\n\t\t\t'error',\r\n\t\t\t\"Comment form on requested page found multiple times (selector: '%s')\",\r\n\t\t\toldCommentsContainer,\r\n\t\t);\r\n\t\toldCommentsContainer = oldCommentsContainer.filter( function() {\r\n\t\t\treturn jQuery( this ).children().length > 0 && ! jQuery( this ).is( ':header' );\r\n\t\t} );\r\n\t}\r\n\r\n\tconst extractedBody = WPAC._ExtractBody( data );\r\n\tif ( extractedBody === false ) {\r\n\t\tWPAC._Debug(\r\n\t\t\t'error',\r\n\t\t\t\"Unsupported server response, unable to extract body (data: '%s')\",\r\n\t\t\tdata,\r\n\t\t);\r\n\t\tWPAC._LoadFallbackUrl( fallbackUrl );\r\n\t\treturn false;\r\n\t}\r\n\r\n\t// Call before select elements.\r\n\tif ( beforeSelectElements !== '' ) {\r\n\t\tconst beforeSelect = new Function( 'extractedBody', beforeSelectElements );\r\n\t\tbeforeSelect( extractedBody );\r\n\t}\r\n\r\n\t// Set up custom event.\r\n\tconst beforeSelectEvent = new CustomEvent( 'wpacBeforeSelectElements', {\r\n\t\tdetail: { extractedBody },\r\n\t} );\r\n\tdocument.dispatchEvent( beforeSelectEvent );\r\n\r\n\tlet newCommentsContainer = extractedBody.find( selectorCommentsContainer );\r\n\tif ( ! newCommentsContainer.length ) {\r\n\t\tWPAC._Debug(\r\n\t\t\t'error',\r\n\t\t\t\"Comment container on requested page not found (selector: '%s')\",\r\n\t\t\tselectorCommentsContainer,\r\n\t\t);\r\n\t\tWPAC._LoadFallbackUrl( fallbackUrl );\r\n\t\treturn false;\r\n\t}\r\n\tif ( newCommentsContainer.length > 1 ) {\r\n\t\tWPAC._Debug(\r\n\t\t\t'error',\r\n\t\t\t\"Comment form on requested page found multiple times (selector: '%s')\",\r\n\t\t\tnewCommentsContainer,\r\n\t\t);\r\n\r\n\t\t// Find the first comment container that has children and is not a heading.\r\n\t\tnewCommentsContainer = newCommentsContainer.filter( function() {\r\n\t\t\treturn jQuery( this ).children().length > 0 && ! jQuery( this ).is( ':header' );\r\n\t\t} );\r\n\r\n\t\t// Find respond selector and remove.\r\n\t\tconst respondContainer = newCommentsContainer.find( selectorRespondContainer );\r\n\t\tif ( respondContainer.length ) {\r\n\t\t\trespondContainer.remove();\r\n\t\t}\r\n\t}\r\n\r\n\t// Call before update comments.\r\n\tif ( '' !== beforeUpdateComments ) {\r\n\t\tconst beforeComments = new Function(\r\n\t\t\t'extractedBody',\r\n\t\t\t'commentUrl',\r\n\t\t\tbeforeUpdateComments,\r\n\t\t);\r\n\t\tbeforeComments( extractedBody, commentUrl );\r\n\t}\r\n\r\n\t// Set up native event handler.\r\n\tconst beforeCommentsEvent = new CustomEvent( 'wpacBeforeUpdateComments', {\r\n\t\tdetail: { newDom: extractedBody, commentUrl },\r\n\t} );\r\n\tdocument.dispatchEvent( beforeCommentsEvent );\r\n\r\n\t// Update title\r\n\tconst extractedTitle = WPAC._ExtractTitle( data );\r\n\tif ( extractedBody !== false ) {\r\n\t\t// Decode HTML entities (see http://stackoverflow.com/a/5796744)\r\n\t\tdocument.title = jQuery( '<textarea />' ).html( extractedTitle ).text();\r\n\t}\r\n\r\n\t// Empty old container, replace with innards of new container.\r\n\toldCommentsContainer.empty();\r\n\toldCommentsContainer.append( newCommentsContainer.children() );\r\n\r\n\tif ( WPAC._Options.commentsEnabled ) {\r\n\t\tconst form = jQuery( selectorCommentForm );\r\n\t\tif ( form.length ) {\r\n\t\t\t// Replace comment form (for spam protection plugin compatibility) if comment form is not nested in comments container\r\n\t\t\t// If comment form is nested in comments container comment form has already been replaced\r\n\t\t\tif ( ! form.parents( selectorCommentsContainer ).length ) {\r\n\t\t\t\tWPAC._Debug( 'info', 'Replace comment form...' );\r\n\t\t\t\tconst newCommentForm = extractedBody.find( selectorCommentForm );\r\n\t\t\t\tif ( newCommentForm.length == 0 ) {\r\n\t\t\t\t\tWPAC._Debug(\r\n\t\t\t\t\t\t'error',\r\n\t\t\t\t\t\t\"Comment form on requested page not found (selector: '%s')\",\r\n\t\t\t\t\t\tselectorCommentForm,\r\n\t\t\t\t\t);\r\n\t\t\t\t\tWPAC._LoadFallbackUrl( fallbackUrl );\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tform.replaceWith( newCommentForm );\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tWPAC._Debug( 'info', 'Try to re-inject comment form...' );\r\n\r\n\t\t\t// \"Re-inject\" comment form, if comment form was removed by updating the comments container; could happen\r\n\t\t\t// if theme support threaded/nested comments and form tag is not nested in comments container\r\n\t\t\t// -> Replace WordPress placeholder <div> (#wp-temp-form-div) with respond <div>\r\n\t\t\tconst wpTempFormDiv = jQuery( '#wp-temp-form-div' );\r\n\t\t\tif ( ! wpTempFormDiv.length ) {\r\n\t\t\t\tWPAC._Debug(\r\n\t\t\t\t\t'error',\r\n\t\t\t\t\t\"WordPress' #wp-temp-form-div container not found\",\r\n\t\t\t\t\tselectorRespondContainer,\r\n\t\t\t\t);\r\n\t\t\t\tWPAC._LoadFallbackUrl( fallbackUrl );\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tconst newRespondContainer = extractedBody.find( selectorRespondContainer );\r\n\t\t\tif ( ! newRespondContainer.length ) {\r\n\t\t\t\tWPAC._Debug(\r\n\t\t\t\t\t'error',\r\n\t\t\t\t\t\"Respond container on requested page not found (selector: '%s')\",\r\n\t\t\t\t\tselectorRespondContainer,\r\n\t\t\t\t);\r\n\t\t\t\tWPAC._LoadFallbackUrl( fallbackUrl );\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\twpTempFormDiv.replaceWith( newRespondContainer );\r\n\t\t}\r\n\r\n\t\tif ( formData ) {\r\n\t\t\t// Re-inject saved form data\r\n\t\t\tjQuery.each( formData, function( key, value ) {\r\n\t\t\t\tconst formElement = jQuery(\r\n\t\t\t\t\t\"[name='\" + value.name + \"']\",\r\n\t\t\t\t\tselectorCommentForm,\r\n\t\t\t\t);\r\n\t\t\t\tif ( formElement.length != 1 || formElement.val() ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tformElement.val( value.value );\r\n\t\t\t} );\r\n\t\t}\r\n\t\tif ( formFocus ) {\r\n\t\t\t// Reset focus\r\n\t\t\tconst formElement = jQuery(\r\n\t\t\t\t\"[name='\" + formFocus + \"']\",\r\n\t\t\t\tselectorCommentForm,\r\n\t\t\t);\r\n\t\t\tif ( formElement ) {\r\n\t\t\t\tformElement.focus();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t// Call after update comments.\r\n\tif ( '' !== afterUpdateComments ) {\r\n\t\tconst updateComments = new Function(\r\n\t\t\t'extractedBody',\r\n\t\t\t'commentUrl',\r\n\t\t\tafterUpdateComments,\r\n\t\t);\r\n\t\tupdateComments( extractedBody, commentUrl );\r\n\t}\r\n\t// Set up native event handler.\r\n\tconst updateCommentsEvent = new CustomEvent( 'wpacAfterUpdateComments', {\r\n\t\tdetail: { newDom: extractedBody, commentUrl },\r\n\t} );\r\n\tdocument.dispatchEvent( updateCommentsEvent );\r\n\r\n\treturn true;\r\n};\r\n\r\nWPAC._TestCrossDomainScripting = function( url ) {\r\n\tif ( url.indexOf( 'http' ) != 0 ) {\r\n\t\treturn false;\r\n\t}\r\n\tconst domain = window.location.protocol + '//' + window.location.host;\r\n\treturn url.indexOf( domain ) != 0;\r\n};\r\n\r\nWPAC._TestFallbackUrl = function( url ) {\r\n\t// Get URL object.\r\n\tconst urlObject = new URL( url );\r\n\r\n\t// Get query params.\r\n\tconst queryParams = urlObject.searchParams;\r\n\tconst fallbackParam = queryParams.get( 'WPACFallback' );\r\n\tconst randomParam = queryParams.get( 'WPACRandom' );\r\n\r\n\treturn fallbackParam && randomParam;\r\n};\r\n\r\nWPAC.AttachForm = function( options ) {\r\n\t// Set default options\r\n\toptions = jQuery.extend(\r\n\t\t{\r\n\t\t\tselectorCommentForm: WPAC._Options.selectorCommentForm,\r\n\t\t\tselectorCommentPagingLinks: WPAC._Options.selectorCommentPagingLinks,\r\n\t\t\tbeforeSelectElements: WPACCallbacks.beforeSelectElements,\r\n\t\t\tbeforeSubmitComment: WPACCallbacks.beforeSubmitComment,\r\n\t\t\tafterPostComment: WPACCallbacks.afterPostComment,\r\n\t\t\tselectorCommentsContainer: WPAC._Options.selectorCommentsContainer,\r\n\t\t\tselectorRespondContainer: WPAC._Options.selectorRespondContainer,\r\n\t\t\tbeforeUpdateComments: WPACCallbacks.beforeUpdateComments,\r\n\t\t\tafterUpdateComments: WPACCallbacks.afterUpdateComments,\r\n\t\t\tscrollToAnchor: ! WPAC._Options.disableScrollToAnchor,\r\n\t\t\tupdateUrl: ! WPAC._Options.disableUrlUpdate,\r\n\t\t\tselectorCommentLinks: WPAC._Options.selectorCommentLinks,\r\n\t\t},\r\n\t\toptions || {},\r\n\t);\r\n\r\n\t/**\r\n\t * Filter the options for Ajaxify Comments.\r\n\t *\r\n\t * @param { Object } options Options for Ajaxify Comments.\r\n\t * @param { string } url     The URL to load.\r\n\t * @param { string } caller  What function called the filter.\r\n\t */\r\n\toptions = wpacHooks.applyFilters( 'wpacJSOptions', options, '', 'AttachForm' );\r\n\r\n\tif ( WPAC._Options.debug && WPAC._Options.commentsEnabled ) {\r\n\t\tWPAC._Debug( 'info', 'Attach form...' );\r\n\t\tWPAC._DebugSelector( 'comment form', options.selectorCommentForm );\r\n\t\tWPAC._DebugSelector(\r\n\t\t\t'comments container',\r\n\t\t\toptions.selectorCommentsContainer,\r\n\t\t);\r\n\t\tWPAC._DebugSelector( 'respond container', options.selectorRespondContainer );\r\n\t\tWPAC._DebugSelector(\r\n\t\t\t'comment paging links',\r\n\t\t\toptions.selectorCommentPagingLinks,\r\n\t\t\ttrue,\r\n\t\t);\r\n\t\tWPAC._DebugSelector( 'comment links', options.selectorCommentLinks, true );\r\n\t}\r\n\r\n\t// Try before submit comment. Using new function is not ideal here, but safer than exec.\r\n\tif ( '' !== WPACCallbacks.beforeSelectElements ) {\r\n\t\tconst beforeSelect = new Function(\r\n\t\t\t'dom',\r\n\t\t\tWPACCallbacks.beforeSelectElements,\r\n\t\t);\r\n\t\tbeforeSelect( jQuery( document ) );\r\n\r\n\t\t// Set up native event handler.\r\n\t\tconst beforeSelectEvent = new CustomEvent( 'wpacBeforeSelectElements', {\r\n\t\t\tdetail: { dom: jQuery( document ) },\r\n\t\t} );\r\n\t\tdocument.dispatchEvent( beforeSelectEvent );\r\n\t}\r\n\r\n\t// Get addHandler method\r\n\tif ( jQuery( document ).on ) {\r\n\t\t// jQuery 1.7+\r\n\t\tvar addHandler = function( event, selector, handler ) {\r\n\t\t\tjQuery( document ).on( event, selector, handler );\r\n\t\t};\r\n\t} else if ( jQuery( document ).delegate ) {\r\n\t\t// jQuery 1.4.3+\r\n\t\tvar addHandler = function( event, selector, handler ) {\r\n\t\t\tjQuery( document ).delegate( selector, event, handler );\r\n\t\t};\r\n\t} else {\r\n\t\t// jQuery 1.3+\r\n\t\tvar addHandler = function( event, selector, handler ) {\r\n\t\t\tjQuery( selector ).live( event, handler );\r\n\t\t};\r\n\t}\r\n\r\n\t// Handle paging link clicks\r\n\tconst pagingClickHandler = function( event ) {\r\n\t\tconst href = jQuery( this ).attr( 'href' );\r\n\t\tif ( href ) {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tWPAC.LoadComments( href, {\r\n\t\t\t\tselectorCommentForm: options.selectorCommentForm,\r\n\t\t\t\tselectorCommentsContainer: options.selectorCommentsContainer,\r\n\t\t\t\tselectorRespondContainer: options.selectorRespondContainer,\r\n\t\t\t\tbeforeSelectElements: options.beforeSelectElements,\r\n\t\t\t\tbeforeUpdateComments: options.beforeUpdateComments,\r\n\t\t\t\tafterUpdateComments: options.afterUpdateComments,\r\n\t\t\t} );\r\n\t\t}\r\n\t};\r\n\taddHandler( 'click', options.selectorCommentPagingLinks, pagingClickHandler );\r\n\r\n\t// Handle comment link clicks\r\n\tconst linkClickHandler = function( event ) {\r\n\t\tconst element = jQuery( this );\r\n\t\tif ( element.is( options.selectorCommentPagingLinks ) ) {\r\n\t\t\treturn;\r\n\t\t} // skip if paging link was clicked\r\n\t\tconst href = element.attr( 'href' );\r\n\t\t// To use new URL.\r\n\t\tconst anchor = new URL( href ).hash;\r\n\t\t\r\n\t\tif ( jQuery( anchor ).length > 0 ) {\r\n\t\t\tif ( options.updateUrl ) {\r\n\t\t\t\tWPAC._UpdateUrl( href );\r\n\t\t\t}\r\n\t\t\tWPAC._ScrollToAnchor( anchor, options.updateUrl );\r\n\t\t\tevent.preventDefault();\r\n\t\t}\r\n\t};\r\n\taddHandler( 'click', options.selectorCommentLinks, linkClickHandler );\r\n\r\n\tif ( ! WPAC._Options.commentsEnabled ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\t// Handle form submit\r\n\tconst formSubmitHandler = function( event ) {\r\n\t\tconst form = jQuery( this );\r\n\r\n\t\t// Try before submit comment. Using new function is not ideal here, but safer than exec.\r\n\t\tif ( WPACCallbacks.beforeSubmitComment !== '' ) {\r\n\t\t\tconst beforeSubmit = new Function(\r\n\t\t\t\t'dom',\r\n\t\t\t\tWPACCallbacks.beforeSubmitComment,\r\n\t\t\t);\r\n\t\t\tbeforeSubmit( jQuery( document ) );\r\n\r\n\t\t\t// Set up native event handler.\r\n\t\t\tconst beforeSubmitEvent = new CustomEvent( 'wpacBeforeSubmitComment', {\r\n\t\t\t\tdetail: { dom: jQuery( document ) },\r\n\t\t\t} );\r\n\t\t\tdocument.dispatchEvent( beforeSubmitEvent );\r\n\t\t}\r\n\r\n\t\tconst submitUrl = form.attr( 'action' );\r\n\r\n\t\t// Cancel AJAX request if cross-domain scripting is detected\r\n\t\tif ( WPAC._TestCrossDomainScripting( submitUrl ) ) {\r\n\t\t\tif ( WPAC._Options.debug && ! form.data( 'submitCrossDomain' ) ) {\r\n\t\t\t\tWPAC._Debug(\r\n\t\t\t\t\t'error',\r\n\t\t\t\t\t\"Cross-domain scripting detected (submit url: '%s'), cancel AJAX request\",\r\n\t\t\t\t\tsubmitUrl,\r\n\t\t\t\t);\r\n\t\t\t\tWPAC._Debug(\r\n\t\t\t\t\t'info',\r\n\t\t\t\t\t'Sleep for 5s to enable analyzing debug messages...',\r\n\t\t\t\t);\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tform.data( 'submitCrossDomain', true );\r\n\t\t\t\twindow.setTimeout( function() {\r\n\t\t\t\t\tjQuery( '#submit', form ).remove();\r\n\t\t\t\t\tform.submit();\r\n\t\t\t\t}, 5000 );\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Stop default event handling\r\n\t\tevent.preventDefault();\r\n\r\n\t\t// Test if form is already submitting\r\n\t\tif ( form.data( 'WPAC_SUBMITTING' ) ) {\r\n\t\t\tWPAC._Debug(\r\n\t\t\t\t'info',\r\n\t\t\t\t'Cancel submit, form is already submitting (Form: %o)',\r\n\t\t\t\tform,\r\n\t\t\t);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tform.data( 'WPAC_SUBMITTING', true );\r\n\r\n\t\t// Show loading info\r\n\t\tWPAC._ShowMessage( WPAC._Options.textPostComment, 'loading' );\r\n\r\n\t\tconst handleErrorResponse = function( data ) {\r\n\t\t\tWPAC._Debug( 'info', 'Comment has not been posted' );\r\n\t\t\tWPAC._Debug(\r\n\t\t\t\t'info',\r\n\t\t\t\t\"Try to extract error message (selector: '%s')...\",\r\n\t\t\t\tWPAC._Options.selectorErrorContainer,\r\n\t\t\t);\r\n\r\n\t\t\t// Extract error message\r\n\t\t\tconst extractedBody = WPAC._ExtractBody( data );\r\n\t\t\tconsole.log( extractedBody );\r\n\t\t\tif ( extractedBody !== false ) {\r\n\t\t\t\tlet errorMessage = extractedBody.find(\r\n\t\t\t\t\tWPAC._Options.selectorErrorContainer,\r\n\t\t\t\t);\r\n\t\t\t\tif ( ! errorMessage.length ) {\r\n\t\t\t\t\t// Check if error message is die message and not paragraph selector.\r\n\t\t\t\t\terrorMessage = extractedBody.find( '.wp-die-message' );\r\n\t\t\t\t}\r\n\t\t\t\tif ( errorMessage.length ) {\r\n\t\t\t\t\terrorMessage = errorMessage.html();\r\n\t\t\t\t\tWPAC._Debug(\r\n\t\t\t\t\t\t'info',\r\n\t\t\t\t\t\t\"Error message '%s' successfully extracted\",\r\n\t\t\t\t\t\terrorMessage,\r\n\t\t\t\t\t);\r\n\t\t\t\t\tWPAC._ShowMessage( errorMessage, 'error' );\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tWPAC._Debug(\r\n\t\t\t\t'error',\r\n\t\t\t\t\"Error message could not be extracted, use error message '%s'.\",\r\n\t\t\t\tWPAC._Options.textUnknownError,\r\n\t\t\t);\r\n\t\t\tWPAC._ShowMessage( WPAC._Options.textUnknownError, 'error' );\r\n\t\t};\r\n\r\n\t\tvar request = jQuery.ajax( {\r\n\t\t\turl: submitUrl,\r\n\t\t\ttype: 'POST',\r\n\t\t\tdata: form.serialize(),\r\n\t\t\tbeforeSend( xhr ) {\r\n\t\t\t\txhr.setRequestHeader( 'X-WPAC-REQUEST', '1' );\r\n\t\t\t},\r\n\t\t\tcomplete( xhr, textStatus ) {\r\n\t\t\t\tform.removeData( 'WPAC_SUBMITTING', true );\r\n\t\t\t},\r\n\t\t\tsuccess( data ) {\r\n\t\t\t\t// Test error state (WordPress >=4.1 does not return 500 status code if posting comment failed)\r\n\t\t\t\tif ( request.getResponseHeader( 'X-WPAC-ERROR' ) ) {\r\n\t\t\t\t\tWPAC._Debug(\r\n\t\t\t\t\t\t'info',\r\n\t\t\t\t\t\t'Found error state X-WPAC-ERROR header.',\r\n\t\t\t\t\t\tcommentUrl,\r\n\t\t\t\t\t);\r\n\t\t\t\t\thandleErrorResponse( data );\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tWPAC._Debug( 'info', 'Comment has been posted' );\r\n\r\n\t\t\t\t// Get info from response header\r\n\t\t\t\tvar commentUrl = request.getResponseHeader( 'X-WPAC-URL' );\r\n\t\t\t\tWPAC._Debug(\r\n\t\t\t\t\t'info',\r\n\t\t\t\t\t\"Found comment URL '%s' in X-WPAC-URL header.\",\r\n\t\t\t\t\tcommentUrl,\r\n\t\t\t\t);\r\n\t\t\t\tconst unapproved = request.getResponseHeader( 'X-WPAC-UNAPPROVED' );\r\n\t\t\t\tWPAC._Debug(\r\n\t\t\t\t\t'info',\r\n\t\t\t\t\t\"Found unapproved state '%s' in X-WPAC-UNAPPROVED\",\r\n\t\t\t\t\tunapproved,\r\n\t\t\t\t);\r\n\r\n\t\t\t\t// Try afterPostComment submit comment. Using new function is not ideal here, but safer than exec.\r\n\t\t\t\tif ( WPACCallbacks.afterPostComment !== '' ) {\r\n\t\t\t\t\tconst afterComment = new Function( 'commentUrl', 'unapproved', options.afterPostComment);\r\n    \t\t\t\tafterComment( commentUrl, unapproved == '1');\r\n\r\n\t\t\t\t\t// Set up native event handler.\r\n\t\t\t\t\tconst afterCommentEvent = new CustomEvent( 'wpacAfterPostComment', {\r\n\t\t\t\t\t\tdetail: { commentUrl, unapproved: unapproved == '1' },\r\n\t\t\t\t\t} );\r\n\t\t\t\t\tdocument.dispatchEvent( afterCommentEvent );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Show success message\r\n\t\t\t\tWPAC._ShowMessage(\r\n\t\t\t\t\tunapproved == '1'\r\n\t\t\t\t\t\t? WPAC._Options.textPostedUnapproved\r\n\t\t\t\t\t\t: WPAC._Options.textPosted,\r\n\t\t\t\t\t'success',\r\n\t\t\t\t);\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Sunshine Confetti Plugin integration.\r\n\t\t\t\t *\r\n\t\t\t\t * @since 3.0.0\r\n\t\t\t\t *\r\n\t\t\t\t * @see https://wordpress.org/plugins/confetti/\r\n\t\t\t\t */\r\n\t\t\t\tif ( typeof window.wps_launch_confetti_cannon !== 'undefined' ) {\r\n\t\t\t\t\twindow.wps_launch_confetti_cannon();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Replace comments (and return if replacing failed)\r\n\t\t\t\tif (\r\n\t\t\t\t\t! WPAC._ReplaceComments(\r\n\t\t\t\t\t\tdata,\r\n\t\t\t\t\t\tcommentUrl,\r\n\t\t\t\t\t\tfalse,\r\n\t\t\t\t\t\t{},\r\n\t\t\t\t\t\t'',\r\n\t\t\t\t\t\toptions.selectorCommentsContainer,\r\n\t\t\t\t\t\toptions.selectorCommentForm,\r\n\t\t\t\t\t\toptions.selectorRespondContainer,\r\n\t\t\t\t\t\toptions.beforeSelectElements,\r\n\t\t\t\t\t\toptions.beforeUpdateComments,\r\n\t\t\t\t\t\toptions.afterUpdateComments,\r\n\t\t\t\t\t)\r\n\t\t\t\t) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Smooth scroll to comment url and update browser url\r\n\t\t\t\tif ( commentUrl ) {\r\n\t\t\t\t\tif ( options.updateUrl ) {\r\n\t\t\t\t\t\tWPAC._UpdateUrl( commentUrl );\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( options.scrollToAnchor ) {\r\n\t\t\t\t\t\tconst anchor =\r\n\t\t\t\t\t\t\tcommentUrl.indexOf( '#' ) >= 0\r\n\t\t\t\t\t\t\t\t? commentUrl.substr( commentUrl.indexOf( '#' ) )\r\n\t\t\t\t\t\t\t\t: null;\r\n\t\t\t\t\t\tif ( anchor ) {\r\n\t\t\t\t\t\t\tWPAC._Debug(\r\n\t\t\t\t\t\t\t\t'info',\r\n\t\t\t\t\t\t\t\t\"Anchor '%s' extracted from comment URL '%s'\",\r\n\t\t\t\t\t\t\t\tanchor,\r\n\t\t\t\t\t\t\t\tcommentUrl,\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tWPAC._ScrollToAnchor( anchor, options.updateUrl );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\terror( jqXhr, textStatus, errorThrown ) {\r\n\t\t\t\t// Test if loading comment url failed (due to cross site scripting error)\r\n\t\t\t\tif ( jqXhr.status === 0 && jqXhr.responseText === '' ) {\r\n\t\t\t\t\tWPAC._Debug(\r\n\t\t\t\t\t\t'error',\r\n\t\t\t\t\t\t'Comment seems to be posted, but loading comment update failed.',\r\n\t\t\t\t\t);\r\n\t\t\t\t\tWPAC._LoadFallbackUrl(\r\n\t\t\t\t\t\tWPAC._AddQueryParamStringToUrl(\r\n\t\t\t\t\t\t\twindow.location.href,\r\n\t\t\t\t\t\t\t'WPACFallback',\r\n\t\t\t\t\t\t\t'1',\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\thandleErrorResponse( jqXhr.responseText );\r\n\t\t\t},\r\n\t\t} );\r\n\t};\r\n\taddHandler( 'submit', options.selectorCommentForm, formSubmitHandler );\r\n};\r\n\r\nWPAC._Initialized = false;\r\nWPAC.Init = function() {\r\n\t// Test if plugin already has been initialized\r\n\tif ( WPAC._Initialized ) {\r\n\t\tWPAC._Debug( 'info', 'Abort initialization (plugin already initialized)' );\r\n\t\treturn false;\r\n\t}\r\n\tWPAC._Initialized = true;\r\n\r\n\t// Assert that environment is set up correctly\r\n\tif ( ! WPAC._Options || ! WPACCallbacks ) {\r\n\t\tWPAC._Debug(\r\n\t\t\t'error',\r\n\t\t\t'Something unexpected happened, initialization failed. Please try to reinstall the plugin.',\r\n\t\t);\r\n\t\treturn false;\r\n\t}\r\n\r\n\t// Debug infos\r\n\tWPAC._Debug( 'info', 'Initializing version %s', WPAC._Options.version );\r\n\r\n\t// Debug infos\r\n\tif ( WPAC._Options.debug ) {\r\n\t\tif ( ! jQuery || ! jQuery.fn || ! jQuery.fn.jquery ) {\r\n\t\t\tWPAC._Debug(\r\n\t\t\t\t'error',\r\n\t\t\t\t'jQuery not found, abort initialization. Please try to reinstall the plugin.',\r\n\t\t\t);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tWPAC._Debug( 'info', 'Found jQuery %s', jQuery.fn.jquery );\r\n\t\tif ( ! jQuery.blockUI || ! jQuery.blockUI.version ) {\r\n\t\t\tWPAC._Debug(\r\n\t\t\t\t'error',\r\n\t\t\t\t'jQuery blockUI not found, abort initialization. Please try to reinstall the plugin.',\r\n\t\t\t);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tWPAC._Debug( 'info', 'Found jQuery blockUI %s', jQuery.blockUI.version );\r\n\t\tif ( ! jQuery.idleTimer ) {\r\n\t\t\tWPAC._Debug(\r\n\t\t\t\t'error',\r\n\t\t\t\t'jQuery Idle Timer plugin not found, abort initialization. Please try to reinstall the plugin.',\r\n\t\t\t);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tWPAC._Debug( 'info', 'Found jQuery Idle Timer plugin' );\r\n\t}\r\n\r\n\tif ( WPAC._Options.selectorPostContainer ) {\r\n\t\tWPAC._Debug(\r\n\t\t\t'info',\r\n\t\t\t\"Multiple comment form support enabled (selector: '%s')\",\r\n\t\t\tWPAC._Options.selectorPostContainer,\r\n\t\t);\r\n\t\tjQuery( WPAC._Options.selectorPostContainer ).each( function( i, e ) {\r\n\t\t\tconst id = jQuery( e ).attr( 'id' );\r\n\t\t\tif ( ! id ) {\r\n\t\t\t\tWPAC._Debug(\r\n\t\t\t\t\t'info',\r\n\t\t\t\t\t'Skip post container element %o (ID not defined)',\r\n\t\t\t\t\te,\r\n\t\t\t\t);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tWPAC.AttachForm( {\r\n\t\t\t\tselectorCommentForm: '#' + id + ' ' + WPAC._Options.selectorCommentForm,\r\n\t\t\t\tselectorCommentPagingLinks:\r\n\t\t\t\t\t'#' + id + ' ' + WPAC._Options.selectorCommentPagingLinks,\r\n\t\t\t\tselectorCommentsContainer:\r\n\t\t\t\t\t'#' + id + ' ' + WPAC._Options.selectorCommentsContainer,\r\n\t\t\t\tselectorRespondContainer:\r\n\t\t\t\t\t'#' + id + ' ' + WPAC._Options.selectorRespondContainer,\r\n\t\t\t} );\r\n\t\t} );\r\n\t} else {\r\n\t\tWPAC.AttachForm();\r\n\t}\r\n\r\n\t// Set up loading preview handlers.\r\n\tjQuery( '#wp-admin-bar-wpac-menu-helper-preview-overlay-loading a' ).on(\r\n\t\t'click',\r\n\t\tfunction( e ) {\r\n\t\t\te.preventDefault();\r\n\t\t\tWPAC._ShowMessage( 'This is the loading preview...', 'loadingPreview' );\r\n\t\t},\r\n\t);\r\n\r\n\t// Set up success preview handlers.\r\n\tjQuery( '#wp-admin-bar-wpac-menu-helper-preview-overlay-success a' ).on(\r\n\t\t'click',\r\n\t\tfunction( e ) {\r\n\t\t\te.preventDefault();\r\n\t\t\tWPAC._ShowMessage( 'This is a success message', 'success' );\r\n\t\t},\r\n\t);\r\n\r\n\t// Set up error preview handlers.\r\n\tjQuery( '#wp-admin-bar-wpac-menu-helper-preview-overlay-error a' ).on(\r\n\t\t'click',\r\n\t\tfunction( e ) {\r\n\t\t\te.preventDefault();\r\n\t\t\tWPAC._ShowMessage( 'This is an error message', 'error' );\r\n\t\t},\r\n\t);\r\n\r\n\t// Set up idle timer\r\n\tif ( WPAC._Options.commentsEnabled && WPAC._Options.autoUpdateIdleTime > 0 ) {\r\n\t\tWPAC._Debug(\r\n\t\t\t'info',\r\n\t\t\t'Auto updating comments enabled (idle time: %s)',\r\n\t\t\tWPAC._Options.autoUpdateIdleTime,\r\n\t\t);\r\n\t\tWPAC._InitIdleTimer();\r\n\t}\r\n\r\n\tWPAC._Debug( 'info', 'Initialization completed' );\r\n\r\n\treturn true;\r\n};\r\n\r\nWPAC._OnIdle = function() {\r\n\tWPAC.RefreshComments( { success: WPAC._InitIdleTimer, scrollToAnchor: false } );\r\n};\r\n\r\nWPAC._InitIdleTimer = function() {\r\n\tif ( WPAC._TestFallbackUrl( location.href ) ) {\r\n\t\tWPAC._Debug(\r\n\t\t\t'error',\r\n\t\t\t\"Fallback URL was detected (url: '%s'), cancel init idle timer\",\r\n\t\t\tlocation.href,\r\n\t\t);\r\n\t\treturn;\r\n\t}\r\n\r\n\tjQuery( document ).idleTimer( 'destroy' );\r\n\tjQuery( document ).idleTimer( WPAC._Options.autoUpdateIdleTime );\r\n\tjQuery( document ).on( 'idle.idleTimer', WPAC._OnIdle );\r\n};\r\n\r\n/**\r\n * Refresh the comments by Ajaxify Comments.\r\n * @param { Object } options Optiosn for Ajaxify Comments.\r\n * @return comments.\r\n */\r\nWPAC.RefreshComments = function( options ) {\r\n\r\n\t// Skip playground.net.\r\n\tif ( WPAC._TestFallbackUrl( location.href ) ) {\r\n\t\tWPAC._Debug(\r\n\t\t\t'error',\r\n\t\t\t\"Fallback URL was detected (url: '%s'), cancel AJAX request\",\r\n\t\t\tlocation.href,\r\n\t\t);\r\n\t\treturn false;\r\n\t}\r\n\r\n\t/**\r\n\t * Filter the options for Ajaxify Comments.\r\n\t *\r\n\t * @param { Object } options Options for Ajaxify Comments.\r\n\t * @param { string } url     The URL to load.\r\n\t * @param { string } caller  What function called the filter.\r\n\t */\r\n\toptions = wpacHooks.applyFilters(\r\n\t\t'wpacJSOptions',\r\n\t\toptions,\r\n\t\tlocation.href,\r\n\t\t'RefreshComments',\r\n\t);\r\n\r\n\t// Users can pass options as first parameter to override selectors.\r\n\treturn WPAC.LoadComments( location.href, options );\r\n};\r\n\r\nWPAC.LoadComments = function( url, options ) {\r\n\t// Cancel AJAX request if cross-domain scripting is detected\r\n\tif ( WPAC._TestCrossDomainScripting( url ) ) {\r\n\t\tWPAC._Debug(\r\n\t\t\t'error',\r\n\t\t\t\"Cross-domain scripting detected (url: '%s'), cancel AJAX request\",\r\n\t\t\turl,\r\n\t\t);\r\n\t\treturn false;\r\n\t}\r\n\r\n\t// Convert boolean parameter (used in version <0.14.0)\r\n\tif ( typeof options === 'boolean' ) {\r\n\t\toptions = { scrollToAnchor: options };\r\n\t}\r\n\r\n\t// Set default options\r\n\toptions = jQuery.extend(\r\n\t\t{\r\n\t\t\tscrollToAnchor: ! WPAC._Options.disableScrollToAnchor,\r\n\t\t\tshowLoadingInfo: true,\r\n\t\t\tupdateUrl: ! WPAC._Options.disableUrlUpdate,\r\n\t\t\tsuccess() { },\r\n\t\t\tselectorCommentForm: WPAC._Options.selectorCommentForm,\r\n\t\t\tselectorCommentsContainer: WPAC._Options.selectorCommentsContainer,\r\n\t\t\tselectorRespondContainer: WPAC._Options.selectorRespondContainer,\r\n\t\t\tdisableCache: WPAC._Options.disableCache,\r\n\t\t\tbeforeSelectElements: WPACCallbacks.beforeSelectElements,\r\n\t\t\tbeforeUpdateComments: WPACCallbacks.beforeUpdateComments,\r\n\t\t\tafterUpdateComments: WPACCallbacks.afterUpdateComments,\r\n\t\t},\r\n\t\toptions || {},\r\n\t);\r\n\r\n\t/**\r\n\t * Filter the options for Ajaxify Comments.\r\n\t *\r\n\t * @param { Object } options Options for Ajaxify Comments.\r\n\t * @param { string } url     The URL to load.\r\n\t * @param { string } caller  What function called the filter.\r\n\t */\r\n\toptions = wpacHooks.applyFilters(\r\n\t\t'wpacJSOptions',\r\n\t\toptions,\r\n\t\turl,\r\n\t\t'LoadComments',\r\n\t);\r\n\r\n\t// Save form data and focus\r\n\tconst formData = jQuery( options.selectorCommentForm ).serializeArray();\r\n\tconst formFocus = document.activeElement\r\n\t\t? jQuery(\r\n\t\t\t\"[name='\" + document.activeElement.name + \"']\",\r\n\t\t\toptions.selectorCommentForm,\r\n\t\t).attr( 'name' )\r\n\t\t: '';\r\n\r\n\t// Get query strings form URL (ajaxifyLazyLoadEnable, nonce, post_id).\r\n\tconst urlObject = new URL( url );\r\n\tconst queryParams = urlObject.searchParams;\r\n\tif ( queryParams.has( 'ajaxifyLazyLoadEnable' ) ) {\r\n\t\tconst ajaxifyLazyLoadEnable = queryParams.get( 'ajaxifyLazyLoadEnable' );\r\n\t\tconst nonce = queryParams.get( 'nonce' );\r\n\t\tconst postId = queryParams.get( 'post_id' );\r\n\r\n\t\t// Add to URL.\r\n\t\turl = WPAC._AddQueryParamStringToUrl(\r\n\t\t\turl,\r\n\t\t\t'ajaxifyLazyLoadEnable',\r\n\t\t\tajaxifyLazyLoadEnable,\r\n\t\t);\r\n\t\turl = WPAC._AddQueryParamStringToUrl( url, 'nonce', nonce );\r\n\t\turl = WPAC._AddQueryParamStringToUrl( url, 'post_id', postId );\r\n\t}\r\n\r\n\tif ( options.disableCache ) {\r\n\t\turl = WPAC._AddQueryParamStringToUrl(\r\n\t\t\turl,\r\n\t\t\t'WPACRandom',\r\n\t\t\tnew Date().getTime(),\r\n\t\t);\r\n\t}\r\n\r\n\tconst request = jQuery.ajax( {\r\n\t\turl,\r\n\t\ttype: 'GET',\r\n\t\tbeforeSend( xhr ) {\r\n\t\t\txhr.setRequestHeader( 'X-WPAC-REQUEST', '1' );\r\n\t\t},\r\n\t\tsuccess( data ) {\r\n\t\t\ttry {\r\n\r\n\t\t\t\tif (\r\n\t\t\t\t\t! WPAC._ReplaceComments(\r\n\t\t\t\t\t\tdata,\r\n\t\t\t\t\t\turl,\r\n\t\t\t\t\t\ttrue,\r\n\t\t\t\t\t\tformData,\r\n\t\t\t\t\t\tformFocus,\r\n\t\t\t\t\t\toptions.selectorCommentsContainer,\r\n\t\t\t\t\t\toptions.selectorCommentForm,\r\n\t\t\t\t\t\toptions.selectorRespondContainer,\r\n\t\t\t\t\t\toptions.beforeSelectElements,\r\n\t\t\t\t\t\toptions.beforeUpdateComments,\r\n\t\t\t\t\t\toptions.afterUpdateComments,\r\n\t\t\t\t\t)\r\n\t\t\t\t) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( options.updateUrl ) {\r\n\t\t\t\t\tWPAC._UpdateUrl( url );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Scroll to anchor\r\n\t\t\t\tvar waitForScrollToAnchor = false;\r\n\t\t\t\tif ( options.scrollToAnchor ) {\r\n\t\t\t\t\tconst anchor =\r\n\t\t\t\t\t\turl.indexOf( '#' ) >= 0 ? url.substr( url.indexOf( '#' ) ) : null;\r\n\t\t\t\t\tif ( anchor ) {\r\n\t\t\t\t\t\tWPAC._Debug( 'info', \"Anchor '%s' extracted from url\", anchor );\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tWPAC._ScrollToAnchor( anchor, options.updateUrl, function() {\r\n\t\t\t\t\t\t\t\toptions.success();\r\n\t\t\t\t\t\t\t} )\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\twaitForScrollToAnchor = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} catch ( e ) {\r\n\t\t\t\tWPAC._Debug(\r\n\t\t\t\t\t'error',\r\n\t\t\t\t\t'Something went wrong while refreshing comments: %s',\r\n\t\t\t\t\te,\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\t// Unblock UI\r\n\t\t\tjQuery.unblockUI();\r\n\r\n\t\t\tif ( ! waitForScrollToAnchor ) {\r\n\t\t\t\toptions.success();\r\n\t\t\t}\r\n\t\t},\r\n\t\terror() {\r\n\t\t\tWPAC._LoadFallbackUrl(\r\n\t\t\t\tWPAC._AddQueryParamStringToUrl(\r\n\t\t\t\t\twindow.location.href,\r\n\t\t\t\t\t'WPACFallback',\r\n\t\t\t\t\t'1',\r\n\t\t\t\t),\r\n\t\t\t);\r\n\t\t},\r\n\t} );\r\n\r\n\treturn true;\r\n};\r\n\r\njQuery( function() {\r\n\tconst initSuccesful = WPAC.Init();\r\n\tif ( true === WPAC._Options.lazyLoadEnabled ) {\r\n\t\tif ( ! initSuccesful ) {\r\n\t\t\tWPAC._LoadFallbackUrl(\r\n\t\t\t\tWPAC._AddQueryParamStringToUrl(\r\n\t\t\t\t\twindow.location.href,\r\n\t\t\t\t\t'WPACFallback',\r\n\t\t\t\t\t'1',\r\n\t\t\t\t),\r\n\t\t\t);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst triggerType = WPAC._Options.lazyLoadTrigger;\r\n\r\n\t\tlet lazyLoadTrigger = WPAC._Options.lazyLoadTrigger;\r\n\t\tconst lazyLoadScrollOffset = parseInt(\r\n\t\t\tWPAC._Options.lazyLoadTriggerScrollOffset,\r\n\t\t);\r\n\t\tconst lazyLoadElement = WPAC._Options.lazyLoadTriggerElement;\r\n\t\tconst lazyLoadInlineType = WPAC._Options.lazyLoadInlineLoadingType;\r\n\t\tlet lazyLoadOffset = parseInt( WPAC._Options.lazyLoadTriggerOffset );\r\n\t\tif ( lazyLoadOffset === 0 ) {\r\n\t\t\tlazyLoadOffset = '100%';\r\n\t\t}\r\n\r\n\t\t// Determine where to load the lazy loading message (if not overlay).\r\n\t\tconst isLazyLoadInline = 'inline' === WPAC._Options.lazyLoadDisplay;\r\n\t\tconst lazyloadInlineDisplayLocation = WPAC._Options.lazyLoadInlineDisplayLocation; /* can be comments, element */\r\n\t\t\r\n\r\n\t\t// If inline, let's move the loader.\r\n\t\tif ( WPAC._Options.lazyLoadIntoElement ) {\r\n\t\t\tlet lazyloadInlineDisplayElement = WPAC._Options.lazyLoadInlineDisplayElement;\r\n\t\t\tif ( 'comments' === lazyloadInlineDisplayLocation ) {\r\n\t\t\t\tlazyloadInlineDisplayElement = WPAC._Options.selectorCommentsContainer;\r\n\t\t\t}\r\n\r\n\t\t\tconst lazyLoadContent = document.querySelector( '#wpac-lazy-load-content' ); // hardcoded selector.\r\n\t\t\tif ( null !== lazyLoadContent ) {\r\n\t\t\t\t// Clone it without ref.\r\n\t\t\t\tconst lazyLoadContentClone = jQuery.clone( lazyLoadContent );\r\n\t\t\t\tlazyLoadContentClone.id = 'wpac-lazy-load-content-clone';\r\n\r\n\t\t\t\t// Add display block and opacity 1.\r\n\t\t\t\tlazyLoadContentClone.style.display = 'block';\r\n\t\t\t\tlazyLoadContentClone.style.opacity = '1';\r\n\t\t\t\tlazyLoadContentClone.style.visibility = 'visible';\r\n\r\n\t\t\t\t// Determine trigger if button.\r\n\t\t\t\tif ( 'button' === lazyLoadInlineType ) {\r\n\t\t\t\t\t// This will make it so that a button must be clicked to load comments.\r\n\t\t\t\t\tlazyLoadTrigger = 'external';\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Display the loader.\r\n\t\t\t\tif ( 'comments' === lazyloadInlineDisplayLocation ) {\r\n\t\t\t\t\tconst commentsContainer = jQuery( lazyloadInlineDisplayElement );\r\n\t\t\t\t\tif ( commentsContainer ) {\r\n\t\t\t\t\t\tcommentsContainer.prepend( lazyLoadContentClone );\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tWPAC._Debug(\r\n\t\t\t\t\t\t\t'error',\r\n\t\t\t\t\t\t\t'Comments container not found for lazy loading when reaching the comments section.',\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if ( 'element' === lazyloadInlineDisplayLocation ) {\r\n\t\t\t\t\tconst domElement = jQuery( lazyloadInlineDisplayElement );\r\n\t\t\t\t\tif ( domElement ) {\r\n\t\t\t\t\t\t// add to top of comments element.\r\n\t\t\t\t\t\tjQuery( domElement ).prepend( lazyLoadContentClone );\r\n\r\n\t\t\t\t\t\t// Remove style attribute.\r\n\t\t\t\t\t\tjQuery( domElement ).removeAttr( 'style' );\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tWPAC._Debug(\r\n\t\t\t\t\t\t\t'error',\r\n\t\t\t\t\t\t\t'Element not found for lazy loading when reaching the element.',\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Init lazy loading button (if any).\r\n\t\t\t\tconst lazyLoadButton = document.querySelector( '.ajaxify-comments-loading-button-wrapper button' );\r\n\t\t\t\tif ( null !== lazyLoadButton ) {\r\n\t\t\t\t\tlazyLoadButton.addEventListener( 'click', function( e ) {\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tlazyLoadButton.innerHTML = WPAC._Options.lazyLoadInlineLoadingButtonLabelLoading;\r\n\t\t\t\t\t\tWPAC.RefreshComments();\r\n\t\t\t\t\t} );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Filter the offset for lazy loading.\r\n\t\t *\r\n\t\t * @see: http://imakewebthings.com/waypoints/api/offset-option/\r\n\t\t *\r\n\t\t * @param { string } lazyLoadOffset       Offset for lazy loading.\r\n\t\t * @param { string } lazyLoadTrigger      The trigger type for lazy loading.\r\n\t\t * @param { number } lazyLoadScrollOffset The scroll offset for lazy loading.\r\n\t\t * @param { string } lazyLoadElement      The element for lazy loading.\r\n\t\t */\r\n\t\tlazyLoadOffset = wpacHooks.applyFilters(\r\n\t\t\t'wpacLazyLoadOffset',\r\n\t\t\tlazyLoadOffset,\r\n\t\t\tlazyLoadTrigger,\r\n\t\t\tlazyLoadScrollOffset,\r\n\t\t\tlazyLoadElement,\r\n\t\t);\r\n\r\n\t\tWPAC._Debug(\r\n\t\t\t'info',\r\n\t\t\t\"Loading comments asynchronously with secondary AJAX request (trigger: '%s')\",\r\n\t\t\tlazyLoadTrigger,\r\n\t\t);\r\n\r\n\t\tif ( window.location.hash ) {\r\n\t\t\tconst regex = /^#comment-[0-9]+$/;\r\n\t\t\tif ( regex.test( window.location.hash ) ) {\r\n\t\t\t\tWPAC._Debug(\r\n\t\t\t\t\t'info',\r\n\t\t\t\t\t\"Comment anchor in URL detected, force loading comments on DomReady (hash: '%s')\",\r\n\t\t\t\t\twindow.location.hash,\r\n\t\t\t\t);\r\n\t\t\t\tlazyLoadTrigger = 'domready';\r\n\t\t\t}\r\n\t\t}\r\n\t\tswitch ( lazyLoadTrigger ) {\r\n\t\t\tcase 'external':\r\n\t\t\t\tWPAC._Debug(\r\n\t\t\t\t\t'info',\r\n\t\t\t\t\t'Lazy loading: Waiting on external trigger for lazy loading comments.',\r\n\t\t\t\t\twindow.location.hash,\r\n\t\t\t\t);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'comments':\r\n\t\t\t\tconst commentsContainer = document.querySelector(\r\n\t\t\t\t\tWPAC._Options.selectorCommentsContainer,\r\n\t\t\t\t);\r\n\t\t\t\tif ( null !== commentsContainer ) {\r\n\t\t\t\t\tWPAC._Debug(\r\n\t\t\t\t\t\t'info',\r\n\t\t\t\t\t\t'Lazy loading: Waiting on comments to scroll into view for lazy loading.',\r\n\t\t\t\t\t\twindow.location.hash,\r\n\t\t\t\t\t);\r\n\t\t\t\t\tjQuery( commentsContainer ).waypoint(\r\n\t\t\t\t\t\tfunction( direction ) {\r\n\t\t\t\t\t\t\tthis.destroy();\r\n\t\t\t\t\t\t\tWPAC._ShowMessage( WPAC._Options.textRefreshComments, 'loading' );\r\n\t\t\t\t\t\t\tWPAC.RefreshComments();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{ offset: lazyLoadScrollOffset ? lazyLoadScrollOffset : '100%' },\r\n\t\t\t\t\t);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tWPAC._Debug(\r\n\t\t\t\t\t\t'error',\r\n\t\t\t\t\t\t'Comments container not found for lazy loading when reaching the comments section.',\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'element':\r\n\t\t\t\tconst domElement = document.querySelector( lazyLoadElement );\r\n\t\t\t\tif ( null !== domElement ) {\r\n\t\t\t\t\tWPAC._Debug(\r\n\t\t\t\t\t\t'info',\r\n\t\t\t\t\t\t'Lazy loading: Waiting on element to scroll into view for lazy loading.',\r\n\t\t\t\t\t\twindow.location.hash,\r\n\t\t\t\t\t);\r\n\t\t\t\t\tjQuery( domElement ).waypoint(\r\n\t\t\t\t\t\tfunction( direction ) {\r\n\t\t\t\t\t\t\tthis.destroy();\r\n\t\t\t\t\t\t\tWPAC._ShowMessage( WPAC._Options.textRefreshComments, 'loading' );\r\n\t\t\t\t\t\t\tWPAC.RefreshComments();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{ offset: lazyLoadScrollOffset ? lazyLoadScrollOffset : '100%' },\r\n\t\t\t\t\t);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tWPAC._Debug(\r\n\t\t\t\t\t\t'error',\r\n\t\t\t\t\t\t'Element not found for lazy loading when reaching the element.',\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'domready':\r\n\t\t\t\tWPAC._Debug(\r\n\t\t\t\t\t'info',\r\n\t\t\t\t\t'Lazy loading: Waiting on Dom to be ready for lazy loading.',\r\n\t\t\t\t\twindow.location.hash,\r\n\t\t\t\t);\r\n\t\t\t\tWPAC._ShowMessage( WPAC._Options.textRefreshComments, 'loading' );\r\n\t\t\t\tWPAC.RefreshComments( { scrollToAnchor: true } ); // force scroll to anchor.\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'scroll':\r\n\t\t\t\tWPAC._Debug(\r\n\t\t\t\t\t'info',\r\n\t\t\t\t\t'Lazy loading: Waiting on Scroll Into View.',\r\n\t\t\t\t\twindow.location.hash,\r\n\t\t\t\t);\r\n\r\n\t\t\t\t// Get the body tag and calculate offset.\r\n\t\t\t\tconst body = document.querySelector( 'body' );\r\n\r\n\t\t\t\tjQuery( body ).waypoint(\r\n\t\t\t\t\tfunction( direction ) {\r\n\t\t\t\t\t\tthis.destroy();\r\n\t\t\t\t\t\tWPAC._ShowMessage( WPAC._Options.textRefreshComments, 'loading' );\r\n\t\t\t\t\t\tWPAC.RefreshComments();\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{ offset: lazyLoadScrollOffset * -1 },\r\n\t\t\t\t);\r\n\t\t}\r\n\t}\r\n} );\r\n\r\nfunction wpac_init() {\r\n\tWPAC._Debug( 'info', 'wpac_init() is deprecated, please use WPAC.Init()' );\r\n\tWPAC.Init();\r\n}\r\n"],"names":["createHooks","wpacHooks","WPAC","_Options","_BodyRegex","RegExp","_ExtractBody","html","jQuery","exec","e","_TitleRegex","_ExtractTitle","_ShowMessage","message","type","lazyLoadDisplay","lazyLoadEnabled","top","popupMarginTop","outerHeight","backgroundColor","popupBackgroundColorLoading","textColor","popupTextColorLoading","popupBackgroundColorError","popupTextColorError","popupBackgroundColorSuccess","popupTextColorSuccess","topOffset","popupVerticalAlign","blockUI","blockMsgClass","fadeIn","popupFadeIn","fadeOut","popupFadeOut","timeout","popupTimeout","centerY","centerX","showOverlay","css","width","left","bottom","border","padding","popupPadding","popupCornerRadius","opacity","popupOpacity","color","textAlign","popupTextAlign","cursor","popupTextFontSize","overlayCSS","popupOverlayBackgroundColor","popupOverlayBackgroundColorOpacity","baseZ","popupZindex","_DebugErrorShown","_Debug","level","debug","Function","prototype","call","bind","window","console","_typeof","log","apply","alert","args","merge","makeArray","arguments","slice","_DebugSelector","elementType","selector","optional","element","length","_AddQueryParamStringToUrl","url","param","value","disableUrlUpdate","urlObject","URL","queryParams","searchParams","set","search","toString","_LoadFallbackUrl","fallbackUrl","textReloadPage","Date","getTime","reload","location","href","setTimeout","_ScrollToAnchor","anchor","updateHash","scrollComplete","anchorElement","scrollSpeed","animateComplete","hash","scrollTargetTopOffset","offset","scrollTop","animate","duration","complete","_UpdateUrl","split","history","replaceState","document","title","_ReplaceComments","data","commentUrl","useFallbackUrl","formData","formFocus","selectorCommentsContainer","selectorCommentForm","selectorRespondContainer","beforeSelectElements","beforeUpdateComments","afterUpdateComments","remove","oldCommentsContainer","lazyLoadIntoElement","lazyLoadInlineDisplayLocation","lazyLoadInlineDisplayElement","filter","children","is","extractedBody","beforeSelect","beforeSelectEvent","CustomEvent","detail","dispatchEvent","newCommentsContainer","find","respondContainer","beforeComments","beforeCommentsEvent","newDom","extractedTitle","text","empty","append","commentsEnabled","form","parents","newCommentForm","replaceWith","wpTempFormDiv","newRespondContainer","each","key","formElement","name","val","focus","updateComments","updateCommentsEvent","_TestCrossDomainScripting","indexOf","domain","protocol","host","_TestFallbackUrl","fallbackParam","get","randomParam","AttachForm","options","extend","selectorCommentPagingLinks","WPACCallbacks","beforeSubmitComment","afterPostComment","scrollToAnchor","disableScrollToAnchor","updateUrl","selectorCommentLinks","applyFilters","dom","on","addHandler","event","handler","delegate","live","pagingClickHandler","attr","preventDefault","LoadComments","linkClickHandler","formSubmitHandler","beforeSubmit","beforeSubmitEvent","submitUrl","submit","textPostComment","handleErrorResponse","selectorErrorContainer","errorMessage","textUnknownError","request","ajax","serialize","beforeSend","xhr","setRequestHeader","textStatus","removeData","success","getResponseHeader","unapproved","afterComment","afterCommentEvent","textPostedUnapproved","textPosted","wps_launch_confetti_cannon","substr","error","jqXhr","errorThrown","status","responseText","_Initialized","Init","version","fn","jquery","idleTimer","selectorPostContainer","i","id","autoUpdateIdleTime","_InitIdleTimer","_OnIdle","RefreshComments","showLoadingInfo","disableCache","serializeArray","activeElement","has","ajaxifyLazyLoadEnable","nonce","postId","waitForScrollToAnchor","unblockUI","initSuccesful","triggerType","lazyLoadTrigger","lazyLoadScrollOffset","parseInt","lazyLoadTriggerScrollOffset","lazyLoadElement","lazyLoadTriggerElement","lazyLoadInlineType","lazyLoadInlineLoadingType","lazyLoadOffset","lazyLoadTriggerOffset","isLazyLoadInline","lazyloadInlineDisplayLocation","lazyloadInlineDisplayElement","lazyLoadContent","querySelector","lazyLoadContentClone","clone","style","display","visibility","commentsContainer","prepend","domElement","removeAttr","lazyLoadButton","addEventListener","innerHTML","lazyLoadInlineLoadingButtonLabelLoading","regex","test","waypoint","direction","destroy","textRefreshComments","body","wpac_init"],"sourceRoot":""}